= Rich text
:toc: right
:imagesdir: media/
:sourcedir: ../src/main/resources/
:snippet: ../code-samples/code-snippets/

In this chapter you'll learn how to render rich text content.

== Background

Enonic boasts a https://developer.enonic.com/docs/xp/stable/cms/schemas/input-types/htmlarea[rich text input type].
Unlike basic text fields, rich-text may contain more complex concepts such as tables, images, links and even custom components (aka macros).
Each of these typically need custom processing during rendering. For instance to ensure contextually correct URLs, image sizes etc.

== Sample content

The `Bio` field in the person content type is exactly what we're looking for:

image::rich-text-bio.png[title="Rich text bio field for Lea Seydoux",width=500px]

== Rich text rendering

We'll be using our existing Person component, and add support for the `Bio` field. 

Follow the steps below:

. *Update the Person processor file* to include the `bio` prop:
+
./src/main/resources/react4xp/components/content/PersonProcessor.ts
[source,TypeScript]
----
include::{sourcedir}react4xp/components/content/PersonProcessor.ts[]
----
+
The ProcessHtml function (part of React4XP) outputs a format that the RichText component can use, as you will see below:
+
. *Update the Person component* with the following content:
+
./src/main/resources/react4xp/components/content/Person.tsx
[source,TypeScript]
----
include::{sourcedir}react4xp/components/content/Person.tsx[]
----

 
*Et voil√†!*
And just like that we have a fully functional rich text rendering.
The page should now look something like this:

image::rich-text-result.png[title="Person content rendered with rich text",width=720px]

If you have a sharp eye, you might notice there is something missing, the factbox is not rendering properly!

== Macros

The HMDB dataset defines a `Fact-Box` macro, which editors may use inside their rich-text input.

. *Add the following files* to your app:
+
./src/main/resources/react4xp/components/macro/FactBox.tsx
[source,TypeScript]
----
include::{sourcedir}react4xp/components/macro/FactBox.tsx[]
----
+
./src/main/resources/react4xp/components/macro/FactboxProcessor.ts
[source,TypeScript]
----
include::{sourcedir}react4xp/components/macro/FactboxProcessor.ts[]
----
+
./src/main/resources/react4xp/components/macro/FactBox.module.css
[source,TypeScript]
----
include::{sourcedir}react4xp/components/macro/FactBox.module.css[]
----
+
. *Register the component*
+
./src/main/resources/react4xp/componentRegistry.tsx
[source,TypeScript]
----
include::{snippet}Rich-text/componentRegistry.tsx[]
----
+
. *Register the processor*
+
./src/main/resources/react4xp/dataFetcher.ts
[source,TypeScript]
----
include::{snippet}Rich-text/dataFetcher.ts[]
----

*Factbox complete!*

You should now see the Factbox rendering properly

image::rich-text-with-macro.png[title="Person content rendered with rich text and macro",width=720px]

Sweet! next up are <<pages#, pages>>.