= Hello React4XP
:toc: right
:imagesdir: media/

Render your first React4XP page

== Add to site

In a few steps we connect the application to the Headless Movie DB, and should be rewarded gloriously. 

. Visit http://localhost:8080/admin^[localhost:8080/admin]. Log in to XP and open Content Studio.
+
. The "Headless Movie Database" project should automatically be selected
+
. Select the root item in the tree structure, and you should see something like this:
+
image:hmdb.png[title="HMDB welcome page", width=855px]
+
. Click btn:[Edit], and connect the React4xp app to the site.
+
image:add-to-site.png[title="Add React4XP application to the site", width=647px]
+
After saving, the preview should change to something like this:
+
image:hello.png[title="React4XP starter page", width=647px]


== Request handling

So, what actually happened here?

The app runs on top of XP's site engine. By adding the application to the site, it is injected into the request pipeline - where it basically hijacks the rendering.

These are the main files involved:

[source,Files]
----
-> site/dataFetcher.ts (Map of data processors)
 -> site/helloProcessor.ts (props for the Hello component)
 -> react4xp/entries/App.tsx (React entry)
  -> react4xp/componentRegistry.tsx (R4XP component list) 
   -> react4xp/components/Hello.tsx (Welcome page)
----

Below we backtrack what happened:

=== Hello component

The Hello component that rendered the actual page is very simple:

.react4xp/components/Hello.tsx
[source,TypeScript]
----
include::../src/main/resources/react4xp/components/Hello.tsx[]
----

It takes a single parameter, HelloProps. The type is declared like this:

.types/HelloProps.ts
[source,TypeScript]
----
include::../src/main/resources/types/HelloProps.ts[]
----

The component is rendered because it has been added to the componentRegistry:

.react4xp/componentRegistry.ts
[source,TypeScript]
----
include::../src/main/resources/react4xp/componentRegistry.tsx[]
----

<1> The Hello component is mapped to the content type `portal:site`, which means it will be executed when the URL matches a site.

NOTE: Try clicking other content items in Content Studio, and you should simply see an error message.


=== HelloProcessor

The responsiblity of HelloProcessor is to produce the props required by a component. A processor may also intercept the request, for instance by producing a redirect. 

.react4xp/components/HelloProcessor.ts
[source,TypeScript]
----
include::../src/main/resources/react4xp/components/HelloProcessor.ts[]
----

Similar to a component, a processor is invoked because it is registered in the dataProcessor:

.react4xp/dataProcessor.ts
[source,TypeScript]
----
include::../src/main/resources/react4xp/dataFetcher.ts[]


That is basically it. Throughout the tutorial, you'll be using this extensively.

TIP: Dive deeper into this topic by visiting the <<appendix/controller#, app controller appendix>>. 

== Next

Great, you rendered your first page, next up how about <<person#, adding your own components>>.

