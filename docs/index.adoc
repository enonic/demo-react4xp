= React4XP project starter
:toc: right
:imagesdir: media/

Build sites and apps that support client- and serverside JSX templating with the React framework, in combination with optimized asset serving and hydration - for lighting fast sites and apps.

React4XP integrates React with the CMS components in Content Studio, and allows reuse of JSX templates for both back-end, front-end and editorial use cases. It builds directly on top of traditional XP controllers, making JSX look like any other templating engine out there, while expanding the possibilities for single-page sites and client-side driven apps when needed.

== Introduction

This documentation takes you through the basic elements of React4XP and how to use the starter, helping you kickstart a React4xp project of your own.

Essential features you will learn about:

* How to
* What is
* And then some...

[NOTE]
====
This starter and guide aims for setting up React4xp with *XP 7*. An XP6-compatible version will be released shortly. If you're using XP6 and the XP6 starter, only the installation is different from XP7 - and the XP6 starter handles those differences. Using React4xp the rest of the way is identical, so *you can still use this guide for both versions.*
====

=== What is React4xp?

React4xp is a suite of tools: a library with a few companion NPM packages. They can of course be used separately or be modified to suit your needs.

But they're *built to work together out of the box* to make everything as easy as possible for you to compile JSX components so that XP can find and use them, insert editorial data into the XP components, use isomorphic serverside and clientside rendering and hydration, and optimize and serve reusable asset chunks to the client side.

This starter handles the full setup.


== Create project

To setup a project locally, run the following command:

  enonic project create -r starter-react4xp

Remember to create a *new XP sandbox* when completing the project wizard.

NOTE: *Don't have the Enonic CLI?* Visit the https://developer.enonic.com/start[Getting started guide] to install it.


== Project structure

Next step! If you're used to working with an https://developer.enonic.com/guides/my-first-webapp[ordinary] XP project with https://developer.enonic.com/templates/webpack[webpack], the project will look very similar - the biggest news is the folder `react4xp/` under `resources/`. Your project folder should now look something like this:

.Selected files from the project structure:
[source,files]
----
build.gradle <--1-->
settings.gradle <--1-->
package.json <--2-->
build/ <--3-->
src/
  main/
    resources/
      assets/ <!--4-->
      react4xp/ <!--5-->
        _entries <!--6-->
          REPLACE_ME.jsx <!--7-->
      site/
        parts/ <!--8-->
        pages/ <!--8-->
        REPLACE_ME.jsx <!--7-->
      webapp/ <!--9-->
----


<1> The gradle files are used by the build system. The starter adds some setup here: the library *lib-react4xp* is imported, and some building steps are triggered, putting everything together (using webpack with configurations that are fetched with NPM).
<2> `package.json` sets up NPM package import
<3> `build/` will contain output files produced by the build. All the output from the react4xp build process (along with a few housekeeping data files) will be compiled into the subfolder `build/resources/main/assets/react4xp`. These built assets are used in runtime both on client- and server side.
<4> But note that `assets/react4xp` is NOT the source of those React4xp assets! Just use `assets/` for other, general, non-react4xp static assets such as css and icons, etc.
<5> `react4xp/` is the general folder for react component source files. React4xp will look for `.js` and `.jsx` files here and in all subfolders, and compile them during build. All subfolders below this (except for `_entries` - see below) will be compiled to *chunks* with the same name as the subfolder. Put nested/reused react components in subfolders like that, and also other code imported by your components.
<6> `react4xp/_entries/` is special and magic. This is the main folder for *entry components* - react components that can be used by XP through react4xp (i.e., don't need to be referred to (and nested in) other react components.
<7> Two `REPLACE_ME.jsx` files: simply placeholders needed by webpack. Removed each of these when you've added one or more react source file below `react4xp/_entries/` and `site/`.
<8> Below the `site/parts/` and `site/pages/` subfolders is where you put your XP parts and pages, as always. With React4xp, *you can also put `.jsx` entry components together with your parts and pages*. This is the easiest use case: if they have the same name as the part/page, they are super easy to inject into the part/page from the controller.
<9> Folder containing the root webapp controller. React4xp also supplies services that make it easy to inject compiled react components into standalone webapp pages - in principle not even controller logic is needed!

NOTE: *Where you put your entry source files in this structure is important for how you refer to them in code!* See the examples below, or check out more details in https://github.com/enonic/lib-react4xp/blob/master/README.md#jsxpath-how-to-refer-to-a-react4xp-component[the main library docs].


== Building and Deploying

To build and deploy the app, run this command from your shell:

  enonic project deploy

Accept starting the sandbox

[NOTE]
====
To verify that your app started successfully, you should find an entry similar to this in the sandbox log:

  2019-04-09 13:40:40,765 INFO ... Application [<name.of.your.app>] installed successfully
====


== Usage

This section contains a few examples on how you can setup and build something something..

=== Example A - Cool title

=== Example B - (title)

To see your current application:

. log in to the XP admin console (http://localhost:8080)
. open the "Applications" app, and select the listed applications
. visit the app by clicking the web app link.


== API and Details

Bla bla, basic info and links about how react/react4XP works and what it does.


image::hello-dummy.png["Logging in, opening apps and launching webapp" width=1024px]
